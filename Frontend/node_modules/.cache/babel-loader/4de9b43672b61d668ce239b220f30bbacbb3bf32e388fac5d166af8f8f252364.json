{"ast":null,"code":"import api from \"../api/api\";\n\n/* Fetch all users */\nexport const fetchUsers = async () => {\n  const res = await api.get(\"/ChatList\");\n  return res.data.users;\n};\n\n/* Get or create conversation */\nexport const getConversation = async userId => {\n  const res = await api.post(\"/chat/conversation\", {\n    userId\n  });\n  return res.data;\n};\n\n/* Fetch messages of a conversation */\nexport const fetchMessages = async conversationId => {\n  const res = await api.get(`/chat/messages/${conversationId}`);\n  return res.data;\n};\n\n/* Send a message */\n// export const sendMessage = async (data) => {\n//   const res = await api.post(\"/chat/message\", data);\n//   return res.data;\n// };\nexport const sendMessage = async ({\n  conversationId,\n  text,\n  image\n}) => {\n  const formData = new FormData();\n  formData.append(\"conversationId\", conversationId);\n  if (text) formData.append(\"text\", text);\n  images.forEach(img => formData.append(\"images\", img));\n  const res = await api.post(\"/chat/message\", formData, {\n    headers: {\n      \"Content-Type\": \"multipart/form-data\"\n    }\n  });\n  return res.data;\n};\n\n/* Fetch conversation meta */\nexport const fetchConversationMeta = async conversationId => {\n  const res = await api.get(`/chat/conversation/${conversationId}`);\n  return res.data;\n};\n\n/* Fetch user by id */\nexport const fetchUserById = async userId => {\n  const res = await api.get(`/user/${userId}`);\n  return res.data;\n};","map":{"version":3,"names":["api","fetchUsers","res","get","data","users","getConversation","userId","post","fetchMessages","conversationId","sendMessage","text","image","formData","FormData","append","images","forEach","img","headers","fetchConversationMeta","fetchUserById"],"sources":["C:/Users/prath/OneDrive/Documents/Web_projects/Talkify/Frontend/src/Component/Tanstack/Chatlist.js"],"sourcesContent":["import api from \"../api/api\";\r\n\r\n/* Fetch all users */\r\nexport const fetchUsers = async () => {\r\n  const res = await api.get(\"/ChatList\");\r\n  return res.data.users;\r\n};\r\n\r\n/* Get or create conversation */\r\nexport const getConversation = async (userId) => {\r\n  const res = await api.post(\"/chat/conversation\", { userId });\r\n  return res.data;\r\n};\r\n\r\n/* Fetch messages of a conversation */\r\nexport const fetchMessages = async (conversationId) => {\r\n  const res = await api.get(`/chat/messages/${conversationId}`);\r\n  return res.data; \r\n};\r\n\r\n\r\n/* Send a message */\r\n// export const sendMessage = async (data) => {\r\n//   const res = await api.post(\"/chat/message\", data);\r\n//   return res.data;\r\n// };\r\nexport const sendMessage = async ({ conversationId, text, image }) => {\r\n  const formData = new FormData();\r\n  formData.append(\"conversationId\", conversationId);\r\n\r\n  if (text) formData.append(\"text\", text);\r\n images.forEach((img) => formData.append(\"images\", img));\r\n\r\n  const res = await api.post(\"/chat/message\", formData, {\r\n    headers: { \"Content-Type\": \"multipart/form-data\" },\r\n  });\r\n\r\n  return res.data;\r\n};\r\n\r\n\r\n/* Fetch conversation meta */\r\nexport const fetchConversationMeta = async (conversationId) => {\r\n  const res = await api.get(`/chat/conversation/${conversationId}`);\r\n  return res.data;\r\n};\r\n\r\n/* Fetch user by id */\r\nexport const fetchUserById = async (userId) => {\r\n  const res = await api.get(`/user/${userId}`);\r\n  return res.data;\r\n};\r\n"],"mappings":"AAAA,OAAOA,GAAG,MAAM,YAAY;;AAE5B;AACA,OAAO,MAAMC,UAAU,GAAG,MAAAA,CAAA,KAAY;EACpC,MAAMC,GAAG,GAAG,MAAMF,GAAG,CAACG,GAAG,CAAC,WAAW,CAAC;EACtC,OAAOD,GAAG,CAACE,IAAI,CAACC,KAAK;AACvB,CAAC;;AAED;AACA,OAAO,MAAMC,eAAe,GAAG,MAAOC,MAAM,IAAK;EAC/C,MAAML,GAAG,GAAG,MAAMF,GAAG,CAACQ,IAAI,CAAC,oBAAoB,EAAE;IAAED;EAAO,CAAC,CAAC;EAC5D,OAAOL,GAAG,CAACE,IAAI;AACjB,CAAC;;AAED;AACA,OAAO,MAAMK,aAAa,GAAG,MAAOC,cAAc,IAAK;EACrD,MAAMR,GAAG,GAAG,MAAMF,GAAG,CAACG,GAAG,CAAC,kBAAkBO,cAAc,EAAE,CAAC;EAC7D,OAAOR,GAAG,CAACE,IAAI;AACjB,CAAC;;AAGD;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMO,WAAW,GAAG,MAAAA,CAAO;EAAED,cAAc;EAAEE,IAAI;EAAEC;AAAM,CAAC,KAAK;EACpE,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;EAC/BD,QAAQ,CAACE,MAAM,CAAC,gBAAgB,EAAEN,cAAc,CAAC;EAEjD,IAAIE,IAAI,EAAEE,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEJ,IAAI,CAAC;EACxCK,MAAM,CAACC,OAAO,CAAEC,GAAG,IAAKL,QAAQ,CAACE,MAAM,CAAC,QAAQ,EAAEG,GAAG,CAAC,CAAC;EAEtD,MAAMjB,GAAG,GAAG,MAAMF,GAAG,CAACQ,IAAI,CAAC,eAAe,EAAEM,QAAQ,EAAE;IACpDM,OAAO,EAAE;MAAE,cAAc,EAAE;IAAsB;EACnD,CAAC,CAAC;EAEF,OAAOlB,GAAG,CAACE,IAAI;AACjB,CAAC;;AAGD;AACA,OAAO,MAAMiB,qBAAqB,GAAG,MAAOX,cAAc,IAAK;EAC7D,MAAMR,GAAG,GAAG,MAAMF,GAAG,CAACG,GAAG,CAAC,sBAAsBO,cAAc,EAAE,CAAC;EACjE,OAAOR,GAAG,CAACE,IAAI;AACjB,CAAC;;AAED;AACA,OAAO,MAAMkB,aAAa,GAAG,MAAOf,MAAM,IAAK;EAC7C,MAAML,GAAG,GAAG,MAAMF,GAAG,CAACG,GAAG,CAAC,SAASI,MAAM,EAAE,CAAC;EAC5C,OAAOL,GAAG,CAACE,IAAI;AACjB,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}